[gd_scene load_steps=58 format=3 uid="uid://cmqg83tvc3wae"]

[ext_resource type="Script" path="res://scripts/child.gd" id="1_dso0k"]
[ext_resource type="Texture2D" uid="uid://c6x8vtuhef6ki" path="res://ressources/textures/child.png" id="2_28n7a"]
[ext_resource type="Texture2D" uid="uid://de681d4sd88pj" path="res://ressources/textures/teddy_bear.png" id="3_2fto3"]
[ext_resource type="AudioStream" uid="uid://b7fndkadro30c" path="res://ressources/audio/sadiquecat__flashlight-button-press_1.wav" id="4_0s60n"]
[ext_resource type="AudioStream" uid="uid://cqv0r1khh0d0i" path="res://ressources/audio/benjaminnelan__door-locked.wav" id="4_7fuph"]
[ext_resource type="Texture2D" uid="uid://kopi7ve0hon4" path="res://ressources/textures/flashlight.png" id="4_307u6"]
[ext_resource type="Texture2D" uid="uid://hgklt6jkrbx0" path="res://ressources/textures/flashlight_light.png" id="4_ijt5a"]
[ext_resource type="AudioStream" uid="uid://b54ngs1gn42fj" path="res://ressources/audio/sadiquecat__flashlight-button-press_2.wav" id="5_35wil"]
[ext_resource type="AudioStream" uid="uid://psg2b6v1ydao" path="res://ressources/audio/pagancow__dorm-door-opening.wav" id="5_rke8f"]
[ext_resource type="Texture2D" uid="uid://bse2lv7t12vcx" path="res://ressources/textures/key.png" id="8_nhjae"]
[ext_resource type="Script" path="res://scripts/interactable_popup.gd" id="9_7tbvx"]
[ext_resource type="Texture2D" uid="uid://de6n7pi22qaji" path="res://ressources/textures/buttons/b_button.png" id="12_au30u"]
[ext_resource type="Texture2D" uid="uid://dxdnr84u4fm4s" path="res://ressources/textures/buttons/tile_0123.png" id="13_1hw8l"]
[ext_resource type="AudioStream" uid="uid://dol7x1c71oya6" path="res://ressources/audio/Retro FootStep 03.wav" id="14_rg2bj"]
[ext_resource type="AudioStream" uid="uid://b0tifqce2nh6k" path="res://ressources/audio/Retro PickUp Coin 04.wav" id="15_o4nwl"]
[ext_resource type="AudioStream" uid="uid://dqg1qhlierio4" path="res://ressources/audio/Retro FootStep Grass 01.wav" id="16_t2dnf"]

[sub_resource type="AtlasTexture" id="AtlasTexture_qcwk0"]
atlas = ExtResource("2_28n7a")
region = Rect2(0, 320, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_wr4wq"]
atlas = ExtResource("2_28n7a")
region = Rect2(32, 320, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ilvk3"]
atlas = ExtResource("2_28n7a")
region = Rect2(64, 320, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_te8ql"]
atlas = ExtResource("2_28n7a")
region = Rect2(96, 320, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_h5lle"]
atlas = ExtResource("2_28n7a")
region = Rect2(0, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_umkyq"]
atlas = ExtResource("2_28n7a")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_2r268"]
atlas = ExtResource("2_28n7a")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_3v7qb"]
atlas = ExtResource("2_28n7a")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_xhp0o"]
atlas = ExtResource("2_28n7a")
region = Rect2(96, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_4e85e"]
atlas = ExtResource("2_28n7a")
region = Rect2(0, 352, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_7gbn0"]
atlas = ExtResource("2_28n7a")
region = Rect2(32, 352, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_k0hst"]
atlas = ExtResource("2_28n7a")
region = Rect2(64, 352, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_kgmn4"]
atlas = ExtResource("2_28n7a")
region = Rect2(96, 352, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_yf2lb"]
atlas = ExtResource("2_28n7a")
region = Rect2(0, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ydlc0"]
atlas = ExtResource("2_28n7a")
region = Rect2(0, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_1w1rj"]
atlas = ExtResource("2_28n7a")
region = Rect2(32, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_nkc3u"]
atlas = ExtResource("2_28n7a")
region = Rect2(64, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_cl0gl"]
atlas = ExtResource("2_28n7a")
region = Rect2(96, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_6dtys"]
atlas = ExtResource("2_28n7a")
region = Rect2(128, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_5ya7y"]
atlas = ExtResource("2_28n7a")
region = Rect2(160, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_0mtoc"]
atlas = ExtResource("2_28n7a")
region = Rect2(192, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_n0ah3"]
atlas = ExtResource("2_28n7a")
region = Rect2(224, 64, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_201e2"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_qcwk0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wr4wq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ilvk3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_te8ql")
}],
"loop": true,
"name": &"climb",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_h5lle")
}],
"loop": true,
"name": &"fall",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_umkyq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2r268")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3v7qb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xhp0o")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_4e85e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7gbn0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k0hst")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kgmn4")
}],
"loop": true,
"name": &"idle_climb",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_yf2lb")
}],
"loop": true,
"name": &"jump",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ydlc0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1w1rj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nkc3u")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cl0gl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6dtys")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5ya7y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0mtoc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_n0ah3")
}],
"loop": true,
"name": &"run",
"speed": 8.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_435t3"]
size = Vector2(42, 64)

[sub_resource type="Gradient" id="Gradient_dikww"]
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_isire"]
gradient = SubResource("Gradient_dikww")
fill = 1
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(0.95, 0.5)
metadata/_snap_enabled = true
metadata/_snap_count = 20

[sub_resource type="Animation" id="Animation_7p7kh"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("TeddyBearSprite:skew")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_17u5c"]
resource_name = "cuddling"
length = 1.5
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("TeddyBearSprite:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(0.6, 1.4, 1),
"update": 0,
"values": [Vector2(30, 0), Vector2(30, -6), Vector2(30, 6)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("TeddyBearSprite:skew")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.766667),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0698132, -0.0698132]
}

[sub_resource type="Animation" id="Animation_5qwpv"]
resource_name = "get_closer"
length = 0.7
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("TeddyBearSprite:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.7),
"transitions": PackedFloat32Array(0.4, 1),
"update": 0,
"values": [1.5708, 0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.7),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 40), Vector2(0, 20)]
}

[sub_resource type="Animation" id="Animation_jg508"]
resource_name = "put_away"
length = 0.7
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("TeddyBearSprite:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.7),
"transitions": PackedFloat32Array(0.4, 1),
"update": 0,
"values": [0.0, 1.5708]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.7),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 20), Vector2(0, 40)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.7),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_lh0bp"]
_data = {
"RESET": SubResource("Animation_7p7kh"),
"cuddling": SubResource("Animation_17u5c"),
"get_closer": SubResource("Animation_5qwpv"),
"put_away": SubResource("Animation_jg508")
}

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_ee75a"]
playback_mode = 1
random_pitch = 1.2
streams_count = 2
stream_0/stream = ExtResource("4_0s60n")
stream_1/stream = ExtResource("5_35wil")

[sub_resource type="CircleShape2D" id="CircleShape2D_cs4fa"]
radius = 83.006

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_mfnp8"]
bg_color = Color(0, 0, 0, 0.784314)
corner_radius_top_left = 5
corner_radius_top_right = 5
corner_radius_bottom_right = 5
corner_radius_bottom_left = 5

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_77u7d"]
bg_color = Color(0.917647, 0.941176, 0.847059, 1)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0.254902, 0.227451, 0.258824, 1)
corner_radius_top_left = 5
corner_radius_top_right = 5
corner_radius_bottom_right = 5
corner_radius_bottom_left = 5

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_4gnjj"]
bg_color = Color(0.588235, 0.635294, 0.701961, 1)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0.254902, 0.227451, 0.258824, 1)
corner_radius_top_left = 5
corner_radius_top_right = 5
corner_radius_bottom_right = 5
corner_radius_bottom_left = 5

[sub_resource type="RectangleShape2D" id="RectangleShape2D_doehs"]
size = Vector2(24, 56)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_582br"]
size = Vector2(60, 50)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jr6eu"]
size = Vector2(86, 25)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_c58j0"]
size = Vector2(60, 64)

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_l0rn1"]
random_pitch = 4.0
random_volume_offset_db = 2.0
streams_count = 1
stream_0/stream = ExtResource("14_rg2bj")

[node name="Child" type="CharacterBody2D"]
z_index = 10
script = ExtResource("1_dso0k")

[node name="ChildSprite" type="AnimatedSprite2D" parent="."]
z_index = 5
scale = Vector2(4, 4)
sprite_frames = SubResource("SpriteFrames_201e2")
animation = &"idle"
autoplay = "idle"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(1, 16)
shape = SubResource("RectangleShape2D_435t3")

[node name="PointLight2D" type="PointLight2D" parent="."]
position = Vector2(1.90735e-06, 1.90735e-06)
scale = Vector2(4, 4)
texture = SubResource("GradientTexture2D_isire")

[node name="TeddyBear" type="Node2D" parent="."]
z_index = 10
position = Vector2(0, 20)

[node name="TeddyBearSprite" type="Sprite2D" parent="TeddyBear"]
position = Vector2(30, 0)
scale = Vector2(2.5, 2.5)
texture = ExtResource("3_2fto3")

[node name="AnimationPlayer" type="AnimationPlayer" parent="TeddyBear"]
libraries = {
"": SubResource("AnimationLibrary_lh0bp")
}

[node name="Flashlight" type="Node2D" parent="."]
visible = false
z_index = 5
position = Vector2(-4, 16)

[node name="TorchlightLight" type="Area2D" parent="Flashlight"]
position = Vector2(54, 0)
collision_layer = 4
collision_mask = 4

[node name="Sprite2D" type="Sprite2D" parent="Flashlight/TorchlightLight"]
visible = false
position = Vector2(217, 0)
texture = ExtResource("4_ijt5a")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Flashlight/TorchlightLight"]
polygon = PackedVector2Array(400, -174, 14, -8, 14, 8, 400, 173)
disabled = true

[node name="PointLight2D" type="PointLight2D" parent="Flashlight/TorchlightLight"]
position = Vector2(193, 2.38419e-07)
scale = Vector2(0.898045, 0.898045)
shadow_color = Color(1, 1, 1, 0.654902)
texture = ExtResource("4_ijt5a")

[node name="TorchlightSprite" type="Sprite2D" parent="Flashlight"]
position = Vector2(54, 0)
scale = Vector2(2, 2)
texture = ExtResource("4_307u6")

[node name="FlashlightAudio" type="AudioStreamPlayer" parent="Flashlight"]
stream = SubResource("AudioStreamRandomizer_ee75a")
bus = &"Sounds"

[node name="HurtBox" type="Area2D" parent="."]
unique_name_in_owner = true
position = Vector2(0, 16)
collision_layer = 2
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="HurtBox"]
shape = SubResource("CircleShape2D_cs4fa")
debug_color = Color(0.920395, 0.256096, 0.304642, 0.42)

[node name="CourageBar" type="ProgressBar" parent="."]
unique_name_in_owner = true
offset_left = -38.0
offset_top = 51.0
offset_right = 38.0
offset_bottom = 64.0
theme_override_styles/background = SubResource("StyleBoxFlat_mfnp8")
theme_override_styles/fill = SubResource("StyleBoxFlat_77u7d")
value = 100.0
show_percentage = false

[node name="BatteryBar" type="ProgressBar" parent="."]
unique_name_in_owner = true
offset_left = -26.0
offset_top = 67.0
offset_right = 27.0
offset_bottom = 76.0
theme_override_styles/background = SubResource("StyleBoxFlat_mfnp8")
theme_override_styles/fill = SubResource("StyleBoxFlat_4gnjj")
value = 100.0
show_percentage = false

[node name="Key" type="Sprite2D" parent="."]
visible = false
position = Vector2(-20, -30)
scale = Vector2(2, 2)
texture = ExtResource("8_nhjae")

[node name="Key2" type="Sprite2D" parent="."]
visible = false
position = Vector2(15, -30)
scale = Vector2(2, 2)
texture = ExtResource("8_nhjae")

[node name="LadderDetector" type="Area2D" parent="."]
unique_name_in_owner = true
collision_layer = 8
collision_mask = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="LadderDetector"]
position = Vector2(0, 16)
shape = SubResource("RectangleShape2D_doehs")
debug_color = Color(0.470588, 0.501961, 0.25098, 0.419608)

[node name="WindowDetector" type="Area2D" parent="."]
unique_name_in_owner = true
position = Vector2(1, 7)
collision_layer = 16
collision_mask = 16

[node name="CollisionShape2D" type="CollisionShape2D" parent="WindowDetector"]
position = Vector2(-1, 2)
shape = SubResource("RectangleShape2D_582br")
debug_color = Color(0.580941, 0.4581, 0.176535, 0.419608)

[node name="DoorDetector" type="Area2D" parent="."]
unique_name_in_owner = true
collision_layer = 32
collision_mask = 32

[node name="CollisionShape2D" type="CollisionShape2D" parent="DoorDetector"]
position = Vector2(0, 23.5)
shape = SubResource("RectangleShape2D_jr6eu")
debug_color = Color(0.244563, 0.548732, 0.370223, 0.419608)

[node name="KeyDetector" type="Area2D" parent="."]
unique_name_in_owner = true
collision_layer = 64
collision_mask = 64

[node name="CollisionShape2D" type="CollisionShape2D" parent="KeyDetector"]
position = Vector2(0, 16)
shape = SubResource("RectangleShape2D_c58j0")
debug_color = Color(0.203184, 0.530685, 0.569075, 0.419608)

[node name="DoorLocked" type="AudioStreamPlayer" parent="."]
stream = ExtResource("4_7fuph")
bus = &"Sounds"

[node name="DoorOpened" type="AudioStreamPlayer" parent="."]
stream = ExtResource("5_rke8f")
bus = &"Sounds"

[node name="InteractablePopup" type="Node2D" parent="."]
position = Vector2(37, -9)
scale = Vector2(0.692196, 0.692196)
script = ExtResource("9_7tbvx")

[node name="GamepadB" type="Sprite2D" parent="InteractablePopup"]
visible = false
position = Vector2(27, -24)
scale = Vector2(3.5, 3.5)
texture = ExtResource("12_au30u")

[node name="FKey" type="Sprite2D" parent="InteractablePopup"]
visible = false
position = Vector2(28, -22)
scale = Vector2(3.6875, 3.6875)
texture = ExtResource("13_1hw8l")

[node name="Footsteps" type="AudioStreamPlayer" parent="."]
stream = SubResource("AudioStreamRandomizer_l0rn1")
volume_db = -10.0
bus = &"Sounds"

[node name="PickupKey" type="AudioStreamPlayer" parent="."]
stream = ExtResource("15_o4nwl")
volume_db = -12.0
bus = &"Sounds"

[node name="Jump" type="AudioStreamPlayer" parent="."]
stream = ExtResource("16_t2dnf")
volume_db = -5.0
pitch_scale = 2.0
bus = &"Sounds"

[connection signal="animation_finished" from="TeddyBear/AnimationPlayer" to="." method="_on_animation_player_animation_finished"]
[connection signal="body_entered" from="HurtBox" to="." method="_on_hurt_box_body_entered"]
[connection signal="body_exited" from="HurtBox" to="." method="_on_hurt_box_body_exited"]
